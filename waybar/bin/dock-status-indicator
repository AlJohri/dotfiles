#!/bin/bash
# Waybar indicator for dock/monitor status

current_profile=$(hyprmon -active-profile 2>/dev/null)
hypridle_running=$(pgrep -x hypridle >/dev/null && echo "yes" || echo "no")

if [ "$current_profile" = "laptop-screen-disabled" ]; then
    # Docked mode
    icon="󰍺"
    text="Docked"
    tooltip="Docked Mode\nLaptop screen disabled\nAuto-lock: disabled"
    class="docked"
else
    # Dual monitor mode
    icon="󰍹"
    text="Dual"
    tooltip="Dual Monitor Mode\nBoth screens enabled\nAuto-lock: $hypridle_running"
    class="dual"
fi

# Output JSON for waybar
echo "{\"text\":\"$icon\",\"tooltip\":\"$tooltip\",\"class\":\"$class\"}"
