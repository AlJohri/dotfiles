# Extra autostart processes
# Note: This is not all apps autostarted by Hyprland! Omarchy has its own list at
# ~/.local/share/omarchy/default/hypr/autostart.conf
# Both that file and this one (~/.config/hypr/autostart.conf) are sourced in
# ~/.config/hypr/hyprland.conf
#
# exec-once = uwsm app -- my-service

# Restart waybar on reload to fix broken IPC connection.
#
# When `hyprctl reload` runs, Hyprland's IPC socket gets disrupted and waybar
# loses its connection, leaving it in a broken state. This `exec` runs on every
# reload and restarts waybar to restore the IPC connection.
#
# The shadow omarchy-restart-waybar in ~/bin uses flock to serialize concurrent
# calls, preventing duplicate waybars during theme changes.
exec = omarchy-restart-waybar
exec-once = sh -c 'while true; do wayvnc 0.0.0.0; sleep 5; done'
